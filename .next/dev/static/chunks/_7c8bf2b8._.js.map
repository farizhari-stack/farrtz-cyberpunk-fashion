{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/DownloadChrome/copy-of-farrtz-cyberpunk-fashion-next-update-cap-2/services/productService.ts"],"sourcesContent":["import { Product } from '../types';\n\nexport const productService = {\n  initialize: () => {\n    // No-op\n  },\n\n  getAllProducts: async (): Promise<Product[]> => {\n    try {\n      const res = await fetch('/api/products');\n      if (!res.ok) throw new Error('Failed to fetch');\n      const data = await res.json();\n      return data;\n    } catch (e) {\n      console.error(e);\n      return [];\n    }\n  },\n\n  getAllProductsAsync: async (): Promise<Product[]> => {\n    return productService.getAllProducts();\n  },\n\n  getAllProductsSync: (): Product[] => {\n    console.warn(\"getAllProductsSync is deprecated in Next.js version\");\n    return [];\n  },\n\n  saveProduct: async (product: Product): Promise<{ success: boolean; product?: Product }> => {\n    try {\n      const res = await fetch('/api/products', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(product)\n      });\n      const data = await res.json();\n      return { success: res.ok, product: data };\n    } catch (e) {\n      return { success: false };\n    }\n  },\n\n  deleteProduct: async (id: number): Promise<void> => {\n    // Implement DELETE API if needed\n  },\n\n  getProductById: (id: number): Product | undefined => {\n    // Cannot be sync anymore. Return undefined.\n    return undefined;\n  },\n\n  getProductsByCategory: (category: string): Product[] => {\n    // Cannot be sync.\n    return [];\n  },\n\n  // These synchronous getters used by UI filtering might be broken.\n  // The UI should filter the *loaded* products array.\n  // Home.tsx does exactly that (lines 37-43 load products into state, then useMemo to filter).\n  // So replacing these methods with empty/dummy is fine as long as Home.tsx doesn't use them directly for *fetching*.\n  // It uses `generateProducts` helper via `useEffect` -> `productService.getAllProductsAsync`.\n  // Wait, Home.tsx uses `productService.getAllProductsAsync` ONLY.\n  // It uses `generateProducts` from `utils` if API fails?\n  // It uses `productService` for `getAll`.\n  // It filters `allProducts` state using `useMemo`. It DOES NOT call `productService.getProductsByCategory`.\n  // So we are safe.\n};\n"],"names":[],"mappings":";;;;AAEO,MAAM,iBAAiB;IAC5B,YAAY;IACV,QAAQ;IACV;IAEA,gBAAgB;QACd,IAAI;YACF,MAAM,MAAM,MAAM,MAAM;YACxB,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;YAC7B,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,OAAO;QACT,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC;YACd,OAAO,EAAE;QACX;IACF;IAEA,qBAAqB;QACnB,OAAO,eAAe,cAAc;IACtC;IAEA,oBAAoB;QAClB,QAAQ,IAAI,CAAC;QACb,OAAO,EAAE;IACX;IAEA,aAAa,OAAO;QAClB,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,iBAAiB;gBACvC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,OAAO;gBAAE,SAAS,IAAI,EAAE;gBAAE,SAAS;YAAK;QAC1C,EAAE,OAAO,GAAG;YACV,OAAO;gBAAE,SAAS;YAAM;QAC1B;IACF;IAEA,eAAe,OAAO;IACpB,iCAAiC;IACnC;IAEA,gBAAgB,CAAC;QACf,4CAA4C;QAC5C,OAAO;IACT;IAEA,uBAAuB,CAAC;QACtB,kBAAkB;QAClB,OAAO,EAAE;IACX;AAYF"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///D:/DownloadChrome/copy-of-farrtz-cyberpunk-fashion-next-update-cap-2/services/auth.ts"],"sourcesContent":["import { User, Order } from '../types';\n\nconst USER_SESSION_KEY = 'farrtz_user_session';\nconst ADMIN_SESSION_KEY = 'farrtz_admin_session';\n\nexport const authService = {\n  // Login\n  async login(email: string, password: string): Promise<{ success: boolean; message?: string; user?: User }> {\n    try {\n      const res = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password })\n      });\n      const data = await res.json();\n      if (data.success && data.user) {\n        if (!data.user.isAdmin) {\n          authService.setUserSession(data.user);\n        } else {\n          return { success: false, message: 'Please use admin login page.' };\n        }\n      }\n      return data;\n    } catch (e) {\n      return { success: false, message: 'Network error' };\n    }\n  },\n\n  async adminLogin(email: string, password: string): Promise<{ success: boolean; message?: string; user?: User }> {\n    try {\n      const res = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password })\n      });\n      const data = await res.json();\n      if (data.success && data.user) {\n        if (data.user.isAdmin) {\n          authService.setAdminSession(data.user);\n        } else {\n          return { success: false, message: 'Not an admin account.' };\n        }\n      }\n      return data;\n    } catch (e) {\n      return { success: false, message: 'Network error' };\n    }\n  },\n\n  async register(firstName: string, lastName: string, email: string, password: string): Promise<{ success: boolean; message?: string; user?: User }> {\n    try {\n      const res = await fetch('/api/auth/register', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          firstName, lastName, email, password,\n          avatar: `https://api.dicebear.com/7.x/bottts/svg?seed=${firstName}`\n        })\n      });\n      const data = await res.json();\n      if (data.success) {\n        authService.setUserSession(data.user);\n      }\n      return data;\n    } catch (e) {\n      return { success: false, message: 'Network error' };\n    }\n  },\n\n  async checkAdminExists(): Promise<boolean> {\n    // Mock true or fetch check\n    return true;\n  },\n\n  async adminRegister(userData: {\n    email: string;\n    password: string;\n    firstName: string;\n    lastName: string;\n    adminCode: string;\n  }): Promise<{ success: boolean; user?: User; message?: string; autoLogin?: boolean }> {\n    try {\n      const res = await fetch('/api/auth/register', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          ...userData,\n          isAdmin: true\n        })\n      });\n      const data = await res.json();\n      if (data.success) {\n        authService.setAdminSession(data.user);\n        return { success: true, user: data.user, autoLogin: true };\n      }\n      return data;\n    } catch (e) {\n      return { success: false, message: 'Network error' };\n    }\n  },\n\n  async adminUpdatePassword(newPassword: string): Promise<{ success: boolean; message?: string }> {\n    // Implement password update logic here (API call)\n    return { success: true, message: 'Password updated' };\n  },\n\n  // User Password Reset Flow\n  async initiatePasswordReset(email: string): Promise<{ success: boolean; message?: string }> {\n    // In a real app, this would trigger an API call to send an email.\n    // For this prototype, we'll confirm if the email exists locally or just simulate success.\n    console.log(`Simulating sending code to ${email}`);\n    return { success: true, message: 'Verification code sent' };\n  },\n\n  async validateResetCode(email: string, code: string): Promise<{ success: boolean; message?: string }> {\n    // In a real app, this would verify the code against a backend record.\n    // We'll simulate validation (e.g., accept any 5-digit code).\n    if (code.length === 5) {\n      return { success: true };\n    }\n    return { success: false, message: 'Invalid code' };\n  },\n\n  async completePasswordReset(email: string, newPassword: string): Promise<{ success: boolean; message?: string }> {\n    try {\n      // We'll call a new API route to actually update the password if possible,\n      // or just simulate success to allow the flow to complete.\n      // Since we migrated to Supabase, we would ideally use Supabase's password update.\n      // However, without a logged-in session, standard Supabase requires the email link flow.\n      // For this \"code\" flow UI, we will simulate the success for the Prototype.\n\n      // TODO: Implement actual backend update via Admin API if needed.\n      console.log(`Simulating password reset for ${email}`);\n      return { success: true, message: 'Password updated successfully' };\n    } catch (e) {\n      return { success: false, message: 'Failed to update password' };\n    }\n  },\n\n  // Orders\n  createOrder: async (order: Order): Promise<{ success: boolean; message?: string }> => {\n    await fetch('/api/orders', { method: 'POST', body: JSON.stringify(order) });\n    return { success: true };\n  },\n\n  getAllOrdersAsync: async (): Promise<Order[]> => {\n    try {\n      const res = await fetch('/api/orders');\n      return res.ok ? res.json() : [];\n    } catch { return []; }\n  },\n\n  getAllOrders: (): Order[] => {\n    // Legacy sync method not supported with API\n    return [];\n  },\n\n  getOrdersByUser: async (userId: string): Promise<Order[]> => {\n    const orders = await authService.getAllOrdersAsync();\n    return orders.filter(o => o.userId === userId);\n  },\n\n  // User update\n  updateUser: async (user: User): Promise<{ success: boolean; user?: User }> => {\n    // In a real implementation with Supabase, we would call:\n    // await supabase.from('users').update({ wishlist: user.wishlist }).eq('id', user.id);\n    // For now, allow local state update success.\n\n    // Ideally, perform API call here similar to others.\n    // For this step, we just mimic success.\n    console.log('Update user request:', user);\n    authService.setUserSession(user);\n    return { success: true, user };\n  },\n\n  updateOrderStatus: async (orderId: string, status: Order['status']): Promise<boolean> => {\n    return true;\n  },\n\n  // Session methods\n  setUserSession: (user: User) => {\n    const safeUser = { ...user };\n    delete safeUser.password;\n    sessionStorage.setItem(USER_SESSION_KEY, JSON.stringify(safeUser));\n  },\n  setAdminSession: (user: User) => {\n    const safeUser = { ...user };\n    delete safeUser.password;\n    sessionStorage.setItem(ADMIN_SESSION_KEY, JSON.stringify(safeUser));\n  },\n  getCurrentUserSession: (): User | null => {\n    if (typeof window === 'undefined') return null;\n    const data = sessionStorage.getItem(USER_SESSION_KEY);\n    return data ? JSON.parse(data) : null;\n  },\n  getCurrentAdminSession: (): User | null => {\n    if (typeof window === 'undefined') return null;\n    const data = sessionStorage.getItem(ADMIN_SESSION_KEY);\n    return data ? JSON.parse(data) : null;\n  },\n  getCurrentUser: (): User | null => {\n    return authService.getCurrentAdminSession() || authService.getCurrentUserSession();\n  },\n  logout: () => {\n    sessionStorage.removeItem(USER_SESSION_KEY);\n    sessionStorage.removeItem(ADMIN_SESSION_KEY);\n  },\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///D:/DownloadChrome/copy-of-farrtz-cyberpunk-fashion-next-update-cap-2/services/localServices.ts"],"sourcesContent":["import { Feedback, ChatConversation, ChatMessage, Coupon, Product } from '../types';\r\n\r\nexport const feedbackService = {\r\n    getAllFeedback: async (): Promise<Feedback[]> => {\r\n        try {\r\n            const res = await fetch('/api/feedbacks');\r\n            return res.ok ? res.json() : [];\r\n        } catch { return []; }\r\n    },\r\n\r\n    createFeedback: async (feedback: Omit<Feedback, 'id'>): Promise<Feedback | null> => {\r\n        try {\r\n            const res = await fetch('/api/feedbacks', {\r\n                method: 'POST',\r\n                body: JSON.stringify(feedback)\r\n            });\r\n            return res.json();\r\n        } catch { return null; }\r\n    },\r\n\r\n    updateFeedbackStatus: async (id: string, status: Feedback['status']): Promise<Feedback | null> => {\r\n        return null;\r\n    }\r\n};\r\n\r\nexport const messagesService = {\r\n    getAllMessages: async (): Promise<ChatConversation[]> => {\r\n        try {\r\n            const res = await fetch('/api/messages');\r\n            return res.ok ? res.json() : [];\r\n        } catch { return []; }\r\n    },\r\n\r\n    sendMessage: async (messageData: {\r\n        userId: string;\r\n        userName?: string;\r\n        message: string;\r\n        sender: 'user' | 'admin';\r\n    }): Promise<boolean> => {\r\n        try {\r\n            const res = await fetch('/api/messages', {\r\n                method: 'POST',\r\n                body: JSON.stringify(messageData)\r\n            });\r\n            return res.ok;\r\n        } catch { return false; }\r\n    },\r\n\r\n    markAsRead: async (userId: string): Promise<boolean> => {\r\n        return true;\r\n    }\r\n};\r\n\r\nexport const couponsService = {\r\n    getAllCoupons: async (): Promise<Coupon[]> => {\r\n        try {\r\n            const res = await fetch('/api/coupons');\r\n            return res.ok ? res.json() : [];\r\n        } catch { return []; }\r\n    },\r\n\r\n    createCoupon: async (coupon: Omit<Coupon, 'id' | 'createdDate' | 'usageCount' | 'usedBy'>): Promise<Coupon | null> => {\r\n        try {\r\n            const res = await fetch('/api/coupons', {\r\n                method: 'POST',\r\n                body: JSON.stringify(coupon)\r\n            });\r\n            return res.json();\r\n        } catch { return null; }\r\n    },\r\n\r\n    toggleCouponStatus: async (id: string): Promise<Coupon | null> => {\r\n        return null;\r\n    },\r\n\r\n    deleteCoupon: async (id: string): Promise<boolean> => {\r\n        return true;\r\n    },\r\n\r\n    useCoupon: async (couponId: string): Promise<boolean> => {\r\n        return true;\r\n    }\r\n};\r\n\r\nexport const productsApiService = {\r\n    getAll: async (): Promise<{ success: boolean; products?: Product[] }> => {\r\n        return { success: true, products: [] };\r\n    },\r\n    create: async (product: Omit<Product, 'id'>): Promise<{ success: boolean; product?: Product }> => {\r\n        // Could redirect to productService\r\n        return { success: false };\r\n    },\r\n    update: async (id: number, product: Partial<Product>): Promise<{ success: boolean; product?: Product }> => {\r\n        return { success: false };\r\n    },\r\n    delete: async (id: number): Promise<{ success: boolean }> => {\r\n        return { success: false };\r\n    }\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;AAEO,MAAM,kBAAkB;IAC3B,gBAAgB;QACZ,IAAI;YACA,MAAM,MAAM,MAAM,MAAM;YACxB,OAAO,IAAI,EAAE,GAAG,IAAI,IAAI,KAAK,EAAE;QACnC,EAAE,OAAM;YAAE,OAAO,EAAE;QAAE;IACzB;IAEA,gBAAgB,OAAO;QACnB,IAAI;YACA,MAAM,MAAM,MAAM,MAAM,kBAAkB;gBACtC,QAAQ;gBACR,MAAM,KAAK,SAAS,CAAC;YACzB;YACA,OAAO,IAAI,IAAI;QACnB,EAAE,OAAM;YAAE,OAAO;QAAM;IAC3B;IAEA,sBAAsB,OAAO,IAAY;QACrC,OAAO;IACX;AACJ;AAEO,MAAM,kBAAkB;IAC3B,gBAAgB;QACZ,IAAI;YACA,MAAM,MAAM,MAAM,MAAM;YACxB,OAAO,IAAI,EAAE,GAAG,IAAI,IAAI,KAAK,EAAE;QACnC,EAAE,OAAM;YAAE,OAAO,EAAE;QAAE;IACzB;IAEA,aAAa,OAAO;QAMhB,IAAI;YACA,MAAM,MAAM,MAAM,MAAM,iBAAiB;gBACrC,QAAQ;gBACR,MAAM,KAAK,SAAS,CAAC;YACzB;YACA,OAAO,IAAI,EAAE;QACjB,EAAE,OAAM;YAAE,OAAO;QAAO;IAC5B;IAEA,YAAY,OAAO;QACf,OAAO;IACX;AACJ;AAEO,MAAM,iBAAiB;IAC1B,eAAe;QACX,IAAI;YACA,MAAM,MAAM,MAAM,MAAM;YACxB,OAAO,IAAI,EAAE,GAAG,IAAI,IAAI,KAAK,EAAE;QACnC,EAAE,OAAM;YAAE,OAAO,EAAE;QAAE;IACzB;IAEA,cAAc,OAAO;QACjB,IAAI;YACA,MAAM,MAAM,MAAM,MAAM,gBAAgB;gBACpC,QAAQ;gBACR,MAAM,KAAK,SAAS,CAAC;YACzB;YACA,OAAO,IAAI,IAAI;QACnB,EAAE,OAAM;YAAE,OAAO;QAAM;IAC3B;IAEA,oBAAoB,OAAO;QACvB,OAAO;IACX;IAEA,cAAc,OAAO;QACjB,OAAO;IACX;IAEA,WAAW,OAAO;QACd,OAAO;IACX;AACJ;AAEO,MAAM,qBAAqB;IAC9B,QAAQ;QACJ,OAAO;YAAE,SAAS;YAAM,UAAU,EAAE;QAAC;IACzC;IACA,QAAQ,OAAO;QACX,mCAAmC;QACnC,OAAO;YAAE,SAAS;QAAM;IAC5B;IACA,QAAQ,OAAO,IAAY;QACvB,OAAO;YAAE,SAAS;QAAM;IAC5B;IACA,QAAQ,OAAO;QACX,OAAO;YAAE,SAAS;QAAM;IAC5B;AACJ"}},
    {"offset": {"line": 453, "column": 0}, "map": {"version":3,"sources":["file:///D:/DownloadChrome/copy-of-farrtz-cyberpunk-fashion-next-update-cap-2/utils/couponUtils.ts"],"sourcesContent":["import { Coupon } from '../types';\r\n\r\n/**\r\n * Generate a random coupon code\r\n * @param length - Length of the code (default: 8)\r\n * @returns Random uppercase alphanumeric code\r\n */\r\nexport const generateCouponCode = (length: number = 8): string => {\r\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\r\n    let code = '';\r\n    for (let i = 0; i < length; i++) {\r\n        code += characters.charAt(Math.floor(Math.random() * characters.length));\r\n    }\r\n    return code;\r\n};\r\n\r\n/**\r\n * Validate a coupon code\r\n * @param code - Coupon code to validate\r\n * @param coupons - Array of all coupons\r\n * @param userId - Current user ID (optional, for checking duplicate usage)\r\n * @returns Validation result with coupon if valid\r\n */\r\nexport const validateCoupon = (\r\n    code: string,\r\n    coupons: Coupon[],\r\n    userId?: string\r\n): { valid: boolean; coupon?: Coupon; error?: string } => {\r\n    if (!code || code.trim() === '') {\r\n        return { valid: false, error: 'Please enter a coupon code' };\r\n    }\r\n\r\n    // Find coupon (case-insensitive)\r\n    const coupon = coupons.find(\r\n        (c) => c.code.toUpperCase() === code.trim().toUpperCase()\r\n    );\r\n\r\n    if (!coupon) {\r\n        return { valid: false, error: 'Invalid coupon code' };\r\n    }\r\n\r\n    if (!coupon.isActive) {\r\n        return { valid: false, error: 'This coupon is no longer active' };\r\n    }\r\n\r\n    if (isCouponExpired(coupon)) {\r\n        return { valid: false, error: 'This coupon has expired' };\r\n    }\r\n\r\n    if (coupon.maxUsage && coupon.usageCount >= coupon.maxUsage) {\r\n        return { valid: false, error: 'This coupon has reached its usage limit' };\r\n    }\r\n\r\n    // Check if user has already used this coupon\r\n    if (userId && coupon.usedBy && coupon.usedBy.includes(userId)) {\r\n        return { valid: false, error: 'You have already used this coupon' };\r\n    }\r\n\r\n    return { valid: true, coupon };\r\n};\r\n\r\n/**\r\n * Calculate discount amount\r\n * @param subtotal - Subtotal before discount\r\n * @param coupon - Applied coupon\r\n * @returns Discount amount\r\n */\r\nexport const calculateDiscount = (subtotal: number, coupon: Coupon): number => {\r\n    return Math.floor((subtotal * coupon.discountPercent) / 100);\r\n};\r\n\r\n/**\r\n * Check if coupon is expired\r\n * @param coupon - Coupon to check\r\n * @returns True if expired\r\n */\r\nexport const isCouponExpired = (coupon: Coupon): boolean => {\r\n    if (!coupon.expiryDate) return false;\r\n    return new Date(coupon.expiryDate) < new Date();\r\n};\r\n\r\n/**\r\n * Format coupon discount display\r\n * @param coupon - Coupon object\r\n * @returns Formatted string (e.g., \"-20%\")\r\n */\r\nexport const formatCouponDiscount = (coupon: Coupon): string => {\r\n    return `-${coupon.discountPercent}%`;\r\n};\r\n\r\n/**\r\n * Generate unique coupon code (check against existing)\r\n * @param existingCoupons - Array of existing coupons\r\n * @returns Unique code\r\n */\r\nexport const generateUniqueCouponCode = (existingCoupons: Coupon[]): string => {\r\n    let code = generateCouponCode();\r\n    let attempts = 0;\r\n\r\n    // Ensure uniqueness\r\n    while (existingCoupons.some(c => c.code === code) && attempts < 10) {\r\n        code = generateCouponCode();\r\n        attempts++;\r\n    }\r\n\r\n    return code;\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAOO,MAAM,qBAAqB,CAAC,SAAiB,CAAC;IACjD,MAAM,aAAa;IACnB,IAAI,OAAO;IACX,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,IAAK;QAC7B,QAAQ,WAAW,MAAM,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,WAAW,MAAM;IAC1E;IACA,OAAO;AACX;AASO,MAAM,iBAAiB,CAC1B,MACA,SACA;IAEA,IAAI,CAAC,QAAQ,KAAK,IAAI,OAAO,IAAI;QAC7B,OAAO;YAAE,OAAO;YAAO,OAAO;QAA6B;IAC/D;IAEA,iCAAiC;IACjC,MAAM,SAAS,QAAQ,IAAI,CACvB,CAAC,IAAM,EAAE,IAAI,CAAC,WAAW,OAAO,KAAK,IAAI,GAAG,WAAW;IAG3D,IAAI,CAAC,QAAQ;QACT,OAAO;YAAE,OAAO;YAAO,OAAO;QAAsB;IACxD;IAEA,IAAI,CAAC,OAAO,QAAQ,EAAE;QAClB,OAAO;YAAE,OAAO;YAAO,OAAO;QAAkC;IACpE;IAEA,IAAI,gBAAgB,SAAS;QACzB,OAAO;YAAE,OAAO;YAAO,OAAO;QAA0B;IAC5D;IAEA,IAAI,OAAO,QAAQ,IAAI,OAAO,UAAU,IAAI,OAAO,QAAQ,EAAE;QACzD,OAAO;YAAE,OAAO;YAAO,OAAO;QAA0C;IAC5E;IAEA,6CAA6C;IAC7C,IAAI,UAAU,OAAO,MAAM,IAAI,OAAO,MAAM,CAAC,QAAQ,CAAC,SAAS;QAC3D,OAAO;YAAE,OAAO;YAAO,OAAO;QAAoC;IACtE;IAEA,OAAO;QAAE,OAAO;QAAM;IAAO;AACjC;AAQO,MAAM,oBAAoB,CAAC,UAAkB;IAChD,OAAO,KAAK,KAAK,CAAC,AAAC,WAAW,OAAO,eAAe,GAAI;AAC5D;AAOO,MAAM,kBAAkB,CAAC;IAC5B,IAAI,CAAC,OAAO,UAAU,EAAE,OAAO;IAC/B,OAAO,IAAI,KAAK,OAAO,UAAU,IAAI,IAAI;AAC7C;AAOO,MAAM,uBAAuB,CAAC;IACjC,OAAO,CAAC,CAAC,EAAE,OAAO,eAAe,CAAC,CAAC,CAAC;AACxC;AAOO,MAAM,2BAA2B,CAAC;IACrC,IAAI,OAAO;IACX,IAAI,WAAW;IAEf,oBAAoB;IACpB,MAAO,gBAAgB,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,SAAS,WAAW,GAAI;QAChE,OAAO;QACP;IACJ;IAEA,OAAO;AACX"}}]
}